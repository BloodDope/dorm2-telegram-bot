name: Platform Rotation

on:
  schedule:
    # –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch: # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  rotate:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Determine platform
      id: platform
      run: |
        day=$(date +%d | sed 's/^0*//')
        if [ $day -le 20 ]; then
          echo "platform=railway" >> $GITHUB_OUTPUT
        else
          echo "platform=render" >> $GITHUB_OUTPUT
        fi
        echo "Current day: $day"
        echo "Selected platform: $([ $day -le 20 ] && echo "railway" || echo "render")"
    
    - name: Deploy to Railway
      if: steps.platform.outputs.platform == 'railway'
      run: |
        echo "üöÄ Deploying to Railway..."
        # –ó–¥–µ—Å—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Railway
        
    - name: Deploy to Render  
      if: steps.platform.outputs.platform == 'render'
      run: |
        echo "üöÄ Deploying to Render..."
        # –ó–¥–µ—Å—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Render 